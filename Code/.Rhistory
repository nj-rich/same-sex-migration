joint_trends_table <- post_migrant_trends_table %>%
left_join(ante_migrant_trends_table, by = "year")%>%
setNames(c("Year", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex")) %>%
kable(caption = "Migration Trends Data", format = "latex", booktabs = T, digits = 3) %>%
add_header_above(c(" " = 1, "Locally Legalized" = 2, "Federally Legalized" = 2, "Locally Legalized" = 2, "Federally Legalized" = 2))  %>% #hmm reorganize to make more sense?
add_header_above(c(" " = 1, "Fraction Moving To" = 4, "Fraction Moving From" = 4))
writeLines(joint_trends_table, "/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/trends_table.tex")
gc()
#count male/female among those in same-sex relationships
prop_fem_samesex <- summary_stats %>%
mutate(sex = ifelse(sex == 9, NA, sex - 1)) %>%
group_by(year, in_samesex) %>%
summarize(prop_fem = survey_mean(sex, na.rm = T)) %>%
select(-prop_fem_se) %>%
mutate(in_samesex = ifelse(in_samesex == 1, "Same-Sex Sex", "Opposite-Sex Sex")) %>%
pivot_wider(names_from = in_samesex, values_from = prop_fem)
gc()
#fraction with children table
#need to import variables for this
gc()
#mean age by same-sex/opposite-sex weighted, by year
mean_age_samesex <- summary_stats %>%
group_by(year, in_samesex) %>%
summarize(mean_age = survey_mean(age, na.rm = T)) %>%
select(-mean_age_se) %>%
mutate(in_samesex = ifelse(in_samesex == 1, "Same-Sex Age", "Opposite-Sex Age")) %>%
pivot_wider(names_from = in_samesex, values_from = mean_age)
gc()
#fraction >=4 years college attainment by same-sex/opposite-sex weighted, by year
frac_college_samesex <- summary_stats %>%
mutate(four_years_college = ifelse(educ >= 10, 1, 0)) %>%
group_by(year, in_samesex) %>%
summarize(frac_college = survey_mean(four_years_college, na.rm = T)) %>%
select(-frac_college_se) %>%
mutate(in_samesex = ifelse(in_samesex == 1, "Same-Sex College", "Opposite-Sex College")) %>%
pivot_wider(names_from = in_samesex, values_from = frac_college)
gc()
#fraction white by same-sex/opposite-sex weighted, by year
frac_white_samesex <- summary_stats %>%
mutate(white = ifelse(race == 1, 1, 0)) %>%
group_by(year, in_samesex) %>%
summarize(frac_white = survey_mean(white, na.rm = T)) %>%
select(-frac_white_se) %>%
mutate(in_samesex = ifelse(in_samesex == 1, "Same-Sex White", "Opposite-Sex White")) %>%
pivot_wider(names_from = in_samesex, values_from = frac_white) #potentially issues here
gc()
#mean income by same-sex/opposite-sex weighted, by year
mean_income_samesex <- summary_stats %>%
group_by(year, in_samesex) %>%
summarize(mean_income = survey_mean(inctot, na.rm = T)) %>%
select(-mean_income_se) %>%
mutate(in_samesex = ifelse(in_samesex == 1, "Same-Sex Inc", "Opposite-Sex Inc")) %>%
pivot_wider(names_from = in_samesex, values_from = mean_income)
gc()
#create joint table
joint_control_table <- prop_fem_samesex %>%
left_join(mean_age_samesex, by = "year") %>%
left_join(frac_college_samesex, by = "year") %>%
left_join(frac_white_samesex, by = "year") %>%
left_join(mean_income_samesex, by = "year") %>%
setNames(c("Year", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex")) %>% #needs work
kable(caption = "Summary Statistics for Proposed Controls", format = "latex", booktabs = T, digits = 3) %>%
add_header_above(c(" " = 1, "%/100 Female" = 2, "Mean Age" = 2, "%/100 >=4 Years College" = 2, "%/100 White" = 2, "Mean Income" = 2))
#export joint table
writeLines(joint_control_table, "/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/control_table.tex") #NOTE: THIS IS FOR MAC, WILL NEED TO ADJUST FOR WINDOWS
gc()
#create joint table
joint_overall_table <- count_male_female %>%
left_join(count_samesex, by = "year") %>%
left_join(count_in_old_legal, by = "year") %>%
setNames(c("Year", "% Female", "% Same-Sex", "% in Locally Legalized States"))
kable(caption = "Summary Statistics for Overall Population", format = "latex", booktabs = T, digits = 3)
gc()
#create joint table
joint_overall_table <- count_male_female %>%
left_join(count_samesex, by = "year") %>%
left_join(count_in_old_legal, by = "year") %>%
setNames(c("Year", "% Female", "% Same-Sex", "% in Locally Legalized States")) %>%
kable(caption = "Summary Statistics for Overall Population", format = "latex", booktabs = T, digits = 3)
#export joint table
writeLines(joint_overall_table, "/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/overall_table.tex") #NOTE: THIS IS FOR MAC, WILL NEED TO ADJUST FOR WINDOWS
```
gc()
#create joint table
joint_overall_table <- count_male_female %>%
left_join(count_samesex, by = "year") %>%
left_join(count_in_old_legal, by = "year") %>%
setNames(c("Year", "% Female", "% Same-Sex", "% in Locally Legalized States")) %>%
kable(caption = "Summary Statistics for Overall Population", format = "latex", booktabs = T, digits = 3)
#export joint table
writeLines(joint_overall_table, "/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/overall_table.tex")
gc()
#create joint table
joint_overall_table <- count_male_female %>%
left_join(count_samesex, by = "year") %>%
left_join(count_in_old_legal, by = "year") %>%
setNames(c("Year", "%/100 Female", "%/100 Same-Sex", "%/100 in Locally Legalized States")) %>%
kable(caption = "Summary Statistics for Overall Population", format = "latex", booktabs = T, digits = 3)
#export joint table
writeLines(joint_overall_table, "/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/overall_table.tex") #NOTE: THIS IS FOR MAC, WILL NEED TO ADJUST FOR WINDOWS
gc()
#create joint table
joint_location_table <- count_samesex_in_old_legal %>%
left_join(count_samesex_migrants_in_old_legal, by = "year") %>%
left_join(subtracted_trends_post, by = "year") %>%
left_join(count_samesex_from_old_legal, by = "year") %>%
left_join(count_samesex_migrants_from_old_legal, by = "year") %>%
left_join(subtracted_trends_ante, by = "year") %>%
setNames(c("Year", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Difference", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Difference")) %>% #needs work
kable(caption = "Individuals by Location", format = "latex", booktabs = T, digits = 3) %>%
add_header_above(c(" " = 1, "%/100 in Locally Legalized" = 2, "Migrants in Locally Legalized" = 2, " " = 1, "%/100 from Locally Legalized" = 2, "Migrants from Locally Legalized" = 2, " " = 1))
#export joint table
writeLines(joint_location_table, "/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/locations_table.tex") #NOTE: THIS IS FOR MAC, WILL NEED TO ADJUST FOR WINDOWS
```
gc()
#create joint table
joint_location_table <- count_samesex_in_old_legal %>%
left_join(count_samesex_migrants_in_old_legal, by = "year") %>%
left_join(subtracted_trends_post, by = "year") %>%
left_join(count_samesex_from_old_legal, by = "year") %>%
left_join(count_samesex_migrants_from_old_legal, by = "year") %>%
left_join(subtracted_trends_ante, by = "year") %>%
setNames(c("Year", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Difference", "Same-Sex", "Opposite-Sex", "Same-Sex", "Opposite-Sex", "Difference")) %>% #needs work
kable(caption = "Individuals by Location", format = "latex", booktabs = T, digits = 3) %>%
add_header_above(c(" " = 1, "%/100 in Locally Legalized" = 2, "Migrants in Locally Legalized" = 2, " " = 1, "%/100 from Locally Legalized" = 2, "Migrants from Locally Legalized" = 2, " " = 1))
#export joint table
writeLines(joint_location_table, "/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/locations_table.tex") #NOTE: THIS IS FOR MAC, WILL NEED TO ADJUST FOR WINDOWS
?theme_apa
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme_apa(legend.pos = "bottom")
post_migrant_trends_chart
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(ext = element_text(family = "serif"),
plot.title = element_text(hjust = 0.5, size = 16, face = "bold")) +
theme_apa()
post_migrant_trends_chart
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(text = element_text(family = "serif"),
plot.title = element_text(hjust = 0.5, size = 16, face = "bold")) +
theme_apa()
post_migrant_trends_chart
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(text = element_text(family = "serif"),
plot.title = element_text(hjust = 0.5))
post_migrant_trends_plot
post_migrant_trends_chart
?theme
?theme_apa
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme_apa(
plot.title = element_text(hjust = 0.5))
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(plot.title = element_text(hjust = 0.5)),
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States"))
?theme
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme_apa() #to center title (or get rid of): + theme(plot.title = element_text(hjust = 0.5))
post_migrant_trends_chart
post_migrant_trends_chart
?ggsave
?theme_apa
gc()
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.minor = element_blank()
)
post_migrant_trends_chart
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank()
)
post_migrant_trends_chart
?theme_minimal
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white", color = NA)
)
post_migrant_trends_chart
?theme
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "white")
)
post_migrant_trends_chart
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
plot.background = element_rect(fill = "green")
)
post_migrant_trends_chart
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
plot.title = element_text(hjust = 0.5),
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
panel.background = element_rect(fill = "white", color = NA)#gets everything except white background
)
post_migrant_trends_chart
panel.background = element_rect(fill = "white", color = "black"")#gets everything except white background
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
post_migrant_trends_chart
?theme
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
plot.title = element_text(hjust = 0.5),
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
legend.key.width = unit(4, "cm")
#gets everything except white background, see panel background
)
post_migrant_trends_chart
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
plot.title = element_text(hjust = 0.5),
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank(),
legend.key.width = unit(2, "cm")
#gets everything except white background, see panel background
)
post_migrant_trends_chart
?ggsave
post_migrant_trends_chart
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
plot.title = element_text(hjust = 0.5),
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank()
#gets everything except white background, see panel background, see ,
#legend.key.width = unit(2, "cm") to maybe fix legend wrapping
)
post_migrant_trends_chart
#theme_apa
post_migrant_trends_chart
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme(
plot.title = element_text(hjust = 0.5),
legend.position = "right",
legend.title = element_blank(),
legend.text = element_text(size = 12),
axis.text.x = element_text(size = 12),
axis.text.y = element_text(size = 12),
strip.text = element_text(size = 12),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_blank(),
panel.grid.minor = element_blank()
#gets everything except white background, see panel background, see ,
#legend.key.width = unit(2, "cm") to maybe fix legend wrapping
)
#theme_apa
post_migrant_trends_chart
?ggsave
#export charts
ggsave("/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/post_trends.png", plot = post_migrant_trends_chart, scale = 4)
ggsave("/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/ante_trends.png", plot = ante_migrant_trends_chart, scale = 4)
ante_migrant_trends_chart
post_migrant_trends_chart <- post_migrant_trends_df %>%
mutate(year = factor(year)) %>%
ggplot() +
geom_point(aes(x = year, y = frac_migrate, linetype = subgroup, color = subgroup)) +
labs(title = "Ex-Post Triple Regression Visualized",
y = "Fraction Migrated",
color = "Subgroup") + #maybe move title to plot itself
geom_vline(xintercept = factor(2015), color = "black", linetype = "dashed") + #bc factor issues
scale_color_manual(values = c("samesex_oldlegal" = "#EECC66", "opppositesex_oldlegal" = "#EE99AA", "samesex_newlegal" = "#6699CC", "oppositesex_newlegal" = "#997700"),
labels = c("samesex_oldlegal" = "Same-Sex Individuals in Locally Legalized States", "opppositesex_oldlegal" = "Opposite-Sex Individuals in Locally Legalized States", "samesex_newlegal" = "Same-Sex Individuals in Federally Legalized States", "oppositesex_newlegal" = "Opposite-Sex Individuals in Federally Legalized States")) +
theme_apa() #can always go back to theme
#export charts
ggsave("/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/post_trends.png", plot = post_migrant_trends_chart)
ggsave("/Users/njrich/Desktop/same-sex-migration/outputs/summary_stats/ante_trends.png", plot = ante_migrant_trends_chart)
